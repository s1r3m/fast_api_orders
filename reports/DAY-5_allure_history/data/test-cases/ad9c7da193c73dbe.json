{"uid":"ad9c7da193c73dbe","name":"test_cancel_order__not_pending_order__error_response[cancelled_order]","fullName":"tests.orders.test_cancel_order#test_cancel_order__not_pending_order__error_response","historyId":"b3d30fab808e692be476f9b7d10f750d","time":{"start":1734956456133,"stop":1734956456655,"duration":522},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"actions","time":{"start":1734956454523,"stop":1734956454549,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"cancelled_order","time":{"start":1734956454549,"stop":1734956456133,"duration":1584},"status":"passed","steps":[{"name":"create_order","time":{"start":1734956454550,"stop":1734956455188,"duration":638},"status":"passed","steps":[{"name":"post_order","time":{"start":1734956454550,"stop":1734956455188,"duration":638},"status":"passed","steps":[],"attachments":[{"uid":"6ffaa4de1c6bff47","name":"Request - POST /orders","source":"6ffaa4de1c6bff47.json","type":"application/json","size":322},{"uid":"44d4f13f92d4a582","name":"Response - 201 /orders","source":"44d4f13f92d4a582.json","type":"application/json","size":289}],"parameters":[{"name":"stocks","value":"'USDEUR'"},{"name":"quantity","value":"100500"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true}],"attachments":[],"parameters":[{"name":"order","value":"Order(stocks=<Stock.USDEUR: 'USDEUR'>, quantity=100500, status=<OrderStatus.PENDING: 'PENDING'>, id=-1)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true},{"name":"cancel_order","time":{"start":1734956455188,"stop":1734956456133,"duration":945},"status":"passed","steps":[{"name":"delete_order","time":{"start":1734956455188,"stop":1734956456133,"duration":945},"status":"passed","steps":[],"attachments":[{"uid":"47e7b5c2d04d333","name":"Request - DELETE /orders/3","source":"47e7b5c2d04d333.json","type":"application/json","size":228},{"uid":"17d3666d936011d5","name":"Response - 204 /orders/3","source":"17d3666d936011d5.json","type":"application/json","size":229}],"parameters":[{"name":"order_id","value":"3"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true}],"attachments":[],"parameters":[{"name":"order","value":"Order(stocks=<Stock.USDEUR: 'USDEUR'>, quantity=100500, status=<OrderStatus.PENDING: 'PENDING'>, id=3)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":4,"hasContent":true}],"testStage":{"status":"passed","steps":[{"name":"cancel_order","time":{"start":1734956456134,"stop":1734956456267,"duration":133},"status":"broken","statusMessage":"trader_qa.clients.api_client.UnexpectedStatusCode: Expected status code 204, but was 409.\n{\"detail\":\"Order 3 cannot be cancelled!\"}\n","statusTrace":"  File \"/root/.cache/pypoetry/virtualenvs/fast-api-orders-autotests-nvcCJ8lQ-py3.10/lib/python3.10/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n  File \"/qa/trader_qa/actions/user_actions.py\", line 30, in cancel_order\n    response = self._clients.api.delete_order(order.id)\n  File \"/root/.cache/pypoetry/virtualenvs/fast-api-orders-autotests-nvcCJ8lQ-py3.10/lib/python3.10/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n  File \"/qa/trader_qa/clients/api_client.py\", line 148, in delete_order\n    return self._call(request, HTTPStatus.NO_CONTENT)\n  File \"/qa/trader_qa/clients/api_client.py\", line 112, in _call\n    raise UnexpectedStatusCode(err_msg, response=response)\n","steps":[{"name":"delete_order","time":{"start":1734956456134,"stop":1734956456267,"duration":133},"status":"broken","statusMessage":"trader_qa.clients.api_client.UnexpectedStatusCode: Expected status code 204, but was 409.\n{\"detail\":\"Order 3 cannot be cancelled!\"}\n","statusTrace":"  File \"/root/.cache/pypoetry/virtualenvs/fast-api-orders-autotests-nvcCJ8lQ-py3.10/lib/python3.10/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n  File \"/qa/trader_qa/clients/api_client.py\", line 148, in delete_order\n    return self._call(request, HTTPStatus.NO_CONTENT)\n  File \"/qa/trader_qa/clients/api_client.py\", line 112, in _call\n    raise UnexpectedStatusCode(err_msg, response=response)\n","steps":[],"attachments":[{"uid":"14ebc3194f87d25f","name":"Request - DELETE /orders/3","source":"14ebc3194f87d25f.json","type":"application/json","size":228},{"uid":"1404fdb57191b02b","name":"Response - 409 /orders/3","source":"1404fdb57191b02b.json","type":"application/json","size":300}],"parameters":[{"name":"order_id","value":"3"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true}],"attachments":[],"parameters":[{"name":"order","value":"Order(stocks=<Stock.USDEUR: 'USDEUR'>, quantity=100500, status=<OrderStatus.CANCELLED: 'CANCELLED'>, id=3)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true},{"name":"check_order","time":{"start":1734956456268,"stop":1734956456655,"duration":387},"status":"passed","steps":[{"name":"get_order","time":{"start":1734956456268,"stop":1734956456655,"duration":387},"status":"passed","steps":[],"attachments":[{"uid":"70aa19a49f6dc735","name":"Request - GET /orders/3","source":"70aa19a49f6dc735.json","type":"application/json","size":198},{"uid":"4fccb89545280b03","name":"Response - 200 /orders/3","source":"4fccb89545280b03.json","type":"application/json","size":336}],"parameters":[{"name":"order_id","value":"3"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true}],"attachments":[],"parameters":[{"name":"order","value":"Order(stocks=<Stock.USDEUR: 'USDEUR'>, quantity=100500, status=<OrderStatus.CANCELLED: 'CANCELLED'>, id=3)"},{"name":"response","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true},{"name":"check_error_response","time":{"start":1734956456655,"stop":1734956456655,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"exc","value":"<ExceptionInfo UnexpectedStatusCode('Expected status code 204, but was 409.\\n{\"detail\":\"Order 3 cannot be cancelled!\"}') tblen=6>"},{"name":"error","value":"'Order 3 cannot be cancelled!'"},{"name":"status_code","value":"<HTTPStatus.CONFLICT: 409>"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":4,"hasContent":true},"afterStages":[{"name":"actions::0","time":{"start":1734956456657,"stop":1734956456659,"duration":2},"status":"passed","steps":[{"name":"delete_order","time":{"start":1734956456657,"stop":1734956456658,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"order_id","value":"3"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true}],"labels":[{"name":"parentSuite","value":"tests.orders"},{"name":"suite","value":"test_cancel_order"},{"name":"host","value":"6d833f024558"},{"name":"thread","value":"34-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.orders.test_cancel_order"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"order","value":"Order(stocks=<Stock.USDEUR: 'USDEUR'>, quantity=100500, status=<OrderStatus.CANCELLED: 'CANCELLED'>, id=3)"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"ad9c7da193c73dbe.json","parameterValues":["Order(stocks=<Stock.USDEUR: 'USDEUR'>, quantity=100500, status=<OrderStatus.CANCELLED: 'CANCELLED'>, id=3)"]}